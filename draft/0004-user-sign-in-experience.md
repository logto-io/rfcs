---
Start date: 2024-05-24
Author(s): [simeng-li]
Revision: 1
---

# Experience APIs

## 1. Abstract

Sign-in experience is the user authentication process in Logto. It encompasses both the user interface and a set of APIs. These APIs enable anonymous end-users to interact with Logto for identity verification and profile fulfillment, thereby completing the authentication process.

## 2. Motivation

In Logto, we support a variety of modern authentication methods such as password, social login, and multi-factor authentication (MFA). Developers may require a flexible and customizable sign-in experience to meet their specific use cases.

The current version of Experience API (internally called interaction API) in Logto are neither well-documented nor publicly available for the developers. This document aims to provide a comprehensive overview of the authentication model in Logto and introduce a new set of APIs that allow developers to build a customized sign-in experience for their users.

## 3. Introduction

### 3.1 Terminology

- **Sign-in experience**: A user's experience when interacting with Logto. Including the front-end user interface and the back-end API calls.
- **Experience API**: A set of APIs that allow end-users to interact with the Logto for identity verification and profile management.
- **Experience app**: The front-end application that provides the user interface for sign-in experience.
- **Interaction**: A short-lived session that starts when a user initiates the sign-in experience. By default, it has an expiration time of one hour.
- **Social identity**: The data used to identify a user within a social identity provider, such as Google.
- **SSO (Single sign-in) identity**: The data used to identify a user within an identity provider that is configured as an enterprise SSO connector in Logto.
- **Identifier**: A piece of information used to identify a user in Logto. It could be a username, email, phone number, social identity, SSO identity, among others. Each identifier should be unique within its type.
- **Verification record**: A group of data can be used to verify a user's identity by such as password, verification code, social identity, etc.
- **Verification code**: A one-time code sent to the user's email or phone number for identity verification.
- **Verification ID**: A unique identifier for a verification record. It's a random string generated by the Logto server when a verification record is initiated. Users need to provide the verification ID along with additional security information to verify their identity. The verification ID can also be used to track the status of the verification record within the interaction.
- **Multi-factor authentication (MFA)**: A security process that requires more than one verification factor to complete the interaction. It can be used as an additional security check during the sign-in experience.
- **First party application**: A application that is built and managed by the same company that uses Logto for user authentication.
- **Third party application**: A application that is owned and managed by a different company that uses Logto as a external identity provider. E.g. A external application that uses Logto as a enterprise SSO provider.

### 3.2 User experience

The user sign-in experience in Logto consists of the following key steps:

1. **Sign-in experience initiation**: When the client application sends an authentication request to Logto, the user is redirected to Logto's experience app, initiating a new interaction for the authentication process.
2. **Identification**: The user must provide an identifier to Logto, such as a username, email address, phone number, social identity, or SSO identity. This identifier is used to recognize the user during the interaction.
3. **Verification**: The process to verify a user's identity by requesting additional security information. This can be a password, a one-time code, a passkey, etc. Upon the security settings, multiple verification methods can be used.
4. **Profile fulfillment**: : During the interaction, the user may be prompted to complete their profile and MFA settings. This can be necessary for user registration or mandatory updates for existing users' profiles and MFA settings.
5. **Authentication**: Once the user has completed all the necessary steps, they can submit the interaction to get authenticated by Logto. All the user's profile and MFA settings updates will be saved to the user database.
6. **Consent**: Users may need to grant consent for specific actions upon the requested authorization details. This could involve sharing personal information, allowing access for their organization, or granting permissions to specific resources. For first-party applications, consent is implicit and handled automatically by Logto once user get authenticated. For third-party applications, consent is explicit, and the user will be prompted to grant the necessary permissions after a successful interaction submission.
7. **Authorization**: The final step in the sign-in experience. Once the user has been authenticated and consented to the necessary actions, they will be redirected back to the client application with granted authorization.

## 4. Definitions

### 4.1 Interaction event

Interaction event represent the user's current interaction purpose with Logto. Logto will use the interaction event to track the user's interaction progress and provide the corresponding interaction validation and actions.

The following are the types of interaction event supported by Logto:

- **Register**: A new user signs up for a account in Logto.
- **SignIn**: An existing user signs in to their account.
- **ForgotPassword**: A user forgets their password and initiates an account recovery process.

### 4.2 Identifiers

The following are the types of `identifiers` supported by Logto that can be used to uniquely identify a user for the interaction:

- **Username**: A user's unique username.
- **Email**: A verified user's email address.
- **Phone**: A verified user's phone number.
- **Social identity**: A verified user identity data provided by a social identity provider.
- **SSO identity**: A verified user identity data provided by a enterprise SSO connector.

### 4.3 Verification record

A verification record contains the necessary security information to verify a user's identity. One or more verification records can be created and verified using the experience APIs during the sign-in experience. The following types of verification records are supported by Logto:

1. Standard verification

   - **Password**: The user's password, the most common method for verifying identity.
   - **Verification code**: A one-time code sent to the user's email or phone number for identifier verification.
   - **Social authentication**: An authenticated social identity used to directly verify a user's identity.
   - **SSO authentication**: An authenticated SSO identity used to directly verify a user's identity.

2. Multi-Factor Authentication(MFA) verification

   MFA is a security process that requires more than one verification factor to confirm a user's identity. It can be used as an additional security check during user interaction. Developers can enable MFA using Logto's sign-in experience settings. Once enabled, users will be prompted to provide additional MFA verification records during the interaction.

   - **TOTP code**: A time-based one-time code generated by a TOTP app for identity verification.
   - **WebAuthn**: A WebAuthn credential used to verify a user's identity.
   - **Backup code**: A set of backup codes used to verify a user's identity when other MFA verification methods are unavailable.

### 4.4 User profile

The user profile is the user data that will be stored in the Logto user database. All the new profile data provided by the user during the interaction will be saved to the user database once the interaction is submitted. All the profile data fulfillment requirement and restrictions in a user interaction are handled by the Logto sign-in experience settings.

#### 4.4.1 Username identifier

The user's unique username. The username can be used as an identifier for the user during the interaction. Unlike other identifiers, the username does not require additional verification during the interaction.

#### 4.4.2 Verified identifiers

The profile data can be used as unique identifiers for the user within the sign-in experience. Users must verify and claim ownership of this data during the interaction via providing a verified verification record.

- **Email**: Requires a verified `verification code` record for the email address in the interaction.
- **Phone**: Requires a verified `verification code` record for the phone number in the interaction.
- **Social Identity**: Requires a authenticated `social authentication` record to verify the social identity in the interaction.
- **SSO Identity**: Requires a authenticated `SSO authentication` record to verify the SSO identity in the interaction.

#### 4.4.3 Password

The user's password, that can be used as the verification record to verify the user's identity during the interaction. The password can be set, updated, based on the user's interaction event.

- The `password` can be set during the `register` interaction event.
- The `password` can be updated during the `forgot-password` interaction event.
- The `password` can be set during the `sign-in` interaction event ONLY if the user has not set a password before.

#### 4.4.3 MFAs settings

In order to enable MFA verification for the user, the user must provide the necessary MFA settings in Logto. The following MFA settings can be created and attached to the user's profile during the interaction:

- **TOTP secret**: A TOTP secret used to generate time-based one-time codes for MFA verification. A `TOTP code` verification record is required to verify the TOTP secret.
- **WebAuthn registration**: A WebAuthn credential used to verify a user's identity. A `WebAuthn` verification record is required to verify the WebAuthn registration.
- **Backup codes**: A set of backup codes used to verify a user's identity when other MFA verification methods are unavailable.

## 5. Interaction

Logto uses the interaction to track the user's progress and status during the sign-in experience. All the interaction data will be stored in the short-lived authentication session and submitted to Logto once the user completes the interaction.

### 5.1 Interaction data

- **accountId**: The userId of the user for the current interaction. Only available once the user is identified by at least one verified identifier.
- **interactionEvent**: The interaction event for the current interaction.
- **verificationRecords**: The verification record list created during the current interaction.
- **profile**: The user provided profile data in the current interaction that needs to be updated in the user database.

### 5.2 Sign-in event interaction status

Based on the user's sign-in experience progress and user provided data, Logto will track the sign-in interaction using the following status:

1. Initiated: The interaction is initiated by the user.

   - **accountId**: NULL. The user has not been identified yet.
   - **interactionEvent**: OPTIONAL. The interaction event may or may not be specified.
   - **verificationRecords**: OPTIONAL. Verification records may be created before the user is identified.
   - **profile**: NULL. The user can not provide profile data before they are identified and verified.

2. Identified: The user is identified by at least one verified identifier.

   - **accountId**: REQUIRED. The userId of the user for the current interaction.
   - **interactionEvent**: REQUIRED. Sign-in interaction event has been specified.
   - **verificationRecords**: REQUIRED. The identifier verification records are created and verified.
   - **profile**: NULL. The user can not provide profile data before they are verified.

3. Verified: The user is verified by all the necessary verification records, including the MFA.

   - **accountId**: REQUIRED. The userId of the user for the current interaction.
   - **interactionEvent**: REQUIRED. Sign-in interaction event has been specified.
   - **verificationRecords**: REQUIRED. All the necessary verification records are created and verified.
   - **profile**: OPTIONAL. The user can provide profile data during the interaction after they are verified.

4. ProfileFulfilled: The user has provided all the necessary profile data and MFA settings during the interaction.

   - **accountId**: REQUIRED. The userId of the user for the current interaction.
   - **interactionEvent**: REQUIRED. Sign-in interaction event has been specified.
   - **verificationRecords**: REQUIRED. All the necessary verification records are created and verified. (Including the fulfilled profile and MFA settings verification records.)
   - **profile**: REQUIRED. The user has provided all the necessary profile data during the interaction.

5. Submitted: The user has submitted the interaction to Logto for authentication. The user profile and MFA settings will be updated in the user database. Continue to the consent and authorization process.

### 5.3 Register event interaction status

Based on the user's sign-in experience progress and user provided data, Logto will track the register interaction using the following status:

1. Initiated: The interaction is initiated by the user.

   - **accountId**: NULL. Not available for the register interaction.
   - **interactionEvent**: OPTIONAL. The interaction event may or may not be specified.
   - **verificationRecords**: OPTIONAL. Verification records may be created before the user is identified.
   - **profile**: NULL. The user can not provide profile data before they are identified and verified.

2. Identified: The user has at least one necessary identifier provided that can uniquely identify the user.

   - **accountId**: NULL. Not available for the register interaction.
   - **interactionEvent**: REQUIRED. Register interaction event has been specified.
   - **verificationRecords**: OPTIONAL. Required if the user has provided a verified identifier. NULL if username is used as the identifier.
   - **profile**: REQUIRED. The user have provided the necessary sign-up identifier.

3. ProfileFulfilled: The user has provided all the necessary profile data and MFA settings during the interaction.

   - **accountId**: NULL. Not available for the register interaction.
   - **interactionEvent**: REQUIRED. Register interaction event has been specified.
   - **verificationRecords**: OPTIONAL. All the necessary verification records are created and verified. (Including the fulfilled profile and MFA settings verification records.)
   - **profile**: REQUIRED. The user has provided all the necessary profile data during the interaction.

4. Submitted: The user has submitted the interaction to Logto for authentication. New user account will be created in the user database. Continue to the consent and authorization process.

### 5.4 Forgot password event interaction status

- Only `email` and `phone` identifiers can be used to identify the user for the forgot password interaction in Logto.
- The user must provide a valid `verification code` verification record to verify the identifier during the interaction.
- All other types of identifiers and verification records are ignored during the forgot password interaction.
- Only `password` can be set in the user's profile during the forgot password interaction.

1. Initiated: The interaction is initiated by the user.

   - **accountId**: NULL. Not available for the forgot password interaction.
   - **interactionEvent**: OPTIONAL. The interaction event may or may not be specified.
   - **verificationRecords**: OPTIONAL. Verification records may be created before the user is identified.
   - **profile**: NULL. The user can not provide profile data before they are identified and verified.

2. Identified: The user is identified by at least one verified identifier email or phone.

   - **accountId**: REQUIRED. The userId of the user for the current interaction.
   - **interactionEvent**: REQUIRED. Forgot password interaction event has been specified.
   - **verificationRecords**: REQUIRED. The identifier verification records are created and verified.
   - **profile**: NULL. The user can not provide profile data before they are verified.

3. ProfileFulfilled: The user has the new password provided.

   - **accountId**: REQUIRED. The userId of the user for the current interaction.
   - **interactionEvent**: REQUIRED. Forgot password interaction event has been specified.
   - **verificationRecords**: REQUIRED. All the necessary verification records are created and verified.
   - **profile**: REQUIRED. The password has been set during the interaction.

4. Submitted: The user has submitted the interaction to Logto for authentication. The user's password will be updated in the user database. Interaction will be completed.

## 6. Drawbacks

### 6.1 Compatibility

Unlike the current internal interaction APIs, the new experience APIs are publicly available to the developers, as they can be used to build a customized sign-in experience. This mains any changes to the experience APIs may impact the existing developers who rely on the APIs to build their sign-in experience. We need to ensure backward compatibility and carefully version the experience APIs to avoid breaking changes for the developers.

### 6.2 Complexity

The new experience API is stateful and tightly coupled with the sign-in interaction on the Logto server side. Developers must fully understand the concept of interactions in Logto and the related sign-in experience settings to use the experience APIs correctly. This requirement can increase the learning curve and development complexity, potentially leading to misuse or integration errors if not properly understood and implemented.

### 6.3 Cost

Introducing new set of experience APIs will require additional development effort and maintenance cost. Instead of our current internal interaction APIs, the new experience APIs need to be well-documented and maintained to ensure a consistent and reliable sign-in experience for the developers.

We will need to keep two sets of APIs in sync to ensure that the experience APIs are up-to-date with the internal interaction APIs. This will require additional development and testing effort to maintain the consistency between the two sets of APIs.

### 6.4 Performance overhead

To maintain interaction status and decouple API logic, multiple API requests are required from the client side. For example, an additional /api/experience/submit request must be called each time to submit and validate interaction requirements, even for a simple username and password sign-in flow. Instead of a single /api/experience/sign-in request, an extra /submit request is necessary. This increases the number of API calls, potentially leading to higher latency and reduced performance.

## 7. Rationale and alternatives

Logto provides a variety of authentication and verification methods to meet the diverse needs of developers and end-users. We have been constantly improving the sign-in experience configurations and providing extra customization options for the developers to build a flexible and secure sign-in experience. As the sign-in experience is a critical part of the user authentication process, and it is hard to enumerate all the possible uses cases and customization requirements, we believe that opening up the experience APIs to the developers with a customizable front-end user interface will provide more flexibility and control over the sign-in experience.

### 7.1 Considerations

1. Developer Friendly: The current internal interaction APIs are not well-documented and are difficult for developers to use. These APIs are tightly coupled with Logto's server-side interaction logic and involve numerous Logto-specific concepts and definitions, resulting in a steep learning curve. We believe that providing a new set of well-documented and user-friendly experience APIs will significantly ease the development process for creating customized sign-in experiences. Additionally, we need to offer a detailed explanation of the underlying user interaction structure to help developers better understand the sign-in experience.

2. High flexibility: We have identified several limitations in the current internal interaction APIs, such as the lack of support for custom user profile fields and the increasingly bloated interaction structure within the Logto server. By introducing the new experience API, we can redefine the interaction in Logto, enhancing the flexibility and sustainability of the sign-in experience.

### 7.2 Alternatives

Considering no extra new features or customization options are added, instead of introducing a new set of experience APIs, we could consider providing comprehensive documentation for the existing internal interaction APIs. This approach would minimize the risk of breaking changes to the sign-in experience. However, even with detailed documentation, developers may still find it challenging to understand and effectively use these internal interaction APIs.

Moreover, continuing to use our existing APIs and interaction design will likely lead to a rapidly increasing maintenance effort as we keep introducing new features and flows to our system. Eventually, we will reach a point where refactoring and migrating our existing sign-in experience logic will be unavoidable. Therefore, the best time to implement these changes is now.

## 8.Future possibilities

### 8.1.User profile management

The verification and user profile APIs can be extended to support more advanced user profile management features, outside the sign-in experience. For example, users can update their profile data, manage their MFA settings, and view their interaction history using the experience APIs through a dedicated user profile management interface.

### 8.2 Simplified experience API calls

Reduce the complexity of the experience API calls. We are considering merging several API calls into a single API call to simplify the user interaction flow. For example, omit the extra `/submit` request for the sign-in experience, consider introducing a `autoSubmit` flag in some of the interaction APIs to automatically submit the interaction once all the requirements are met.

### 8.3 Provide additional custom user profiles in a sign-in experience

The user profile data can be extended to support custom user profile fields in the sign-in experience. Developers can define and set required custom profile fields for the user during the interaction. This will allow developers to collect additional user data and customize the user profile based on their specific use cases.

### 8.4 Experience API SDK

Develop a client-side SDK that simplifies the integration of the experience APIs into the front-end application. The SDK can provide a set of pre-built components and functions that handle the interaction flow, user profile management, and MFA settings. This will help developers quickly integrate the experience APIs into their applications and build a customized sign-in experience with minimal effort.

## Appendix A. Experience API

The experience API are a set of APIs that allow end-users to interact with the Logto to complete the user sign-in experience.

### 1. Interaction authentication API

The interaction authentication API is the core set of APIs to authenticate the user during the sign-in experience. The user must provide the necessary data to identify and verify themselves in the interaction.

- **Specify interaction event type**: Define the type of interaction event to be initiated. Each interaction event has its own API endpoint to start the interaction.
- **Provide necessary identifiers and verification record**: Supply the required identifiers and verification record to advance the interaction to the identified status.

```ts
type Identifier = {
  type: "username" | "email" | "phone";
  value: string;
};

type Verification = {
  type: "password" | "verification_code";
  /** Can be omitted if a existing verified verification record exist */
  value?: string;
  /** Required if a existing verification record is created for the given identifier */
  verificationId?: string;
};
```

#### Register

`POST /api/experience/register`

The `register` API is used to create a new account in the Logto system. The user must provide at least one `identifier` and a `verification record` to uniquely identify themselves in the Logto system.

Request body:

| Field          | Type         | Description                                        | Required |
| -------------- | ------------ | -------------------------------------------------- | -------- |
| identifier     | Identifier   | The user's `identifier`.                           | Yes      |
| verification   | Verification | Security data to verify the user's identity.       | Yes      |
| verificationId | string       | The unique id for a existing `verification record` | No       |

#### Sign in

`POST /api/experience/sign-in`

The `sign-in` API is used to sign in to an existing account in the Logto system. The user must provide a valid `identifier` and a `verification record` to verify their identity.

Request body:

| Field          | Type         | Description                                        | Required |
| -------------- | ------------ | -------------------------------------------------- | -------- |
| identifier     | Identifier   | The user's `identifier`.                           | Yes      |
| verification   | Verification | Security data to verify the user's identity.       | No       |
| verificationId | string       | The unique id for a existing `verification record` | No       |

#### Forgot password

`POST /api/experience/forgot-password`

The `forgot-password` API is used to initiate an account recovery process in the Logto system. The user must provide a valid `identifier` to start the account recovery process.

Request body:

| Field        | Type         | Description                                  | Required |
| ------------ | ------------ | -------------------------------------------- | -------- |
| identifier   | Identifier   | The user's `identifier`.                     | Yes      |
| verification | Verification | Security data to verify the user's identity. | Yes      |

### 2. Social/SSO authentication API

The social/SSO authentication API is used to authenticate the user with a third-party social or enterprise identity provider. The user must provide the necessary data to authenticate with the social/SSO provider and link the social/SSO identity to their Logto account. Social/SSO authentication API will automatically create a social/SSO verification record and identify the user for the interaction.

#### Get authorization URL

`POST /api/experience/{social|sso}/:connectorId/authorization-url`

The `authorization-url` API is used to generate an authorization URL for the user to authenticate with a third-party social or enterprise identity provider.

This will initiate a new social/SSO sign-in interaction event.

#### Authenticate

`POST /api/experience/{social|sso}/:connectorId/authenticate`

Authenticate the user with the social/SSO provider and return the user's social/SSO identity. Create a new social/SSO verification record and identify the user for the interaction.

Request body:

| Field | Type                   | Description                                |
| ----- | ---------------------- | ------------------------------------------ |
| data  | Record<string, string> | callback data from the social/SSO provider |

#### Register new account with social/SSO identity

`POST /api/experience/{social|sso}/:connectorId/register`

Create a new social/SSO account if the social/SSO identity is not found in the Logto system.

:::note
This API will turn a social/SSO sign-in event into a register event and append the social/SSO identity to the user's profile.
:::

#### Link social/SSO identity to existing account

`POST /api/experience/social/:connectorId/link`

Link social identity to an existing account. Logto will use the `verified_email` from the social identity to find the existing account. Identify the user with the verified email and append the social identity to the user's profile.

:::note
SSO identity will be automatically linked to the existing account if the social/SSO identity is found in the Logto system.
:::

### 3. Verification API

The verification API is a set of APIs used to create and verify a verification record for the user during the sign-in experience.

#### Generate verification code

`POST /api/experience/verification/verification-code`

Calling the `verification-code` API will initiate a verification process for the given `identifier`. A unique `verification id` will be generated for the verification process. The user must provide the `verification id` and the `verification code` to verify the given `identifier`.

Request body:

| Field            | Type             | Description                                                     | Required |
| ---------------- | ---------------- | --------------------------------------------------------------- | -------- |
| identifier       | Identifier       | The user's `identifier`.                                        | Yes      |
| interactionEvent | InteractionEvent | The `interaction event` that triggers the verification process. | Yes      |

A unique `verification id` will be generated for the verification process.

Response body:

```ts
{
  verificationId: string;
}
```

#### Verify verification code

`POST /api/experience/verification/verification-code/verify`

The `verification-code/verify` API is used to verify the given `identifier` with the provided `verification code`. The user must provide the `verification id` and the `verification code` to verify the given `identifier`. A success `verification record` will be created for the given `identifier` if the verification is successful.

Request body:

| Field          | Type       | Description                                           | Required |
| -------------- | ---------- | ----------------------------------------------------- | -------- |
| identifier     | Identifier | The user's `identifier`.                              | Yes      |
| code           | string     | The verification code to verify the given identifier. | Yes      |
| verificationId | string     | The unique id for the verification record.            | Yes      |

#### Generate TOTP secret

Create a new TOTP secret for the user to set up the TOTP MFA method.
The new created TOTP secret will be inserted into the user's MFA settings once the verification is successful and the interaction is submitted.

`POST /api/experience/verification/totp/secret`

Response body:

```ts
{
  secret: string;
  qrCodeUrl: string;
  verificationId: string;
}
```

#### Verify TOTP code

`POST /api/experience/verification/totp/verify`

TOTP code verification API. The user must provide the `verification id` if the TOTP is newly created.

Request body:

| Field           | Type   | Description                                      | Required |
| --------------- | ------ | ------------------------------------------------ | -------- |
| code            | string | The TOTP code to verify the TOTP MFA method      | Yes      |
| verificationId? | string | The verification id for the new generated secret | No       |

#### Create a WebAuthn registration

`POST /api/experience/verification/webAuthn/registration`

Create a new WebAuthn registration options object for the user to verify and set up the WebAuthn MFA method.
The new created WebAuthn credential will be inserted into the user's MFA settings once the verification is successful and the interaction is submitted.

Response body:

```ts
{
  registrationOptions: WebAuthnRegistrationOptions;
  verificationId: string;
}
```

#### Create a WebAuthn authentication

`POST /api/experience/verification/webAuthn/authentication`

Create a new WebAuthn authentication options object for the user to verify the WebAuthn MFA method.

Response body:

```ts
{
  authenticationOptions: WebAuthnAuthenticationOptions;
  verificationId: string;
}
```

#### Verify WebAuthn

`POST /api/experience/verification/webAuthn/verify`

Verify the WebAuthn MFA method with the provided WebAuthn assertion.

Request body:

| Field             | Type              | Description                                                   | Required |
| ----------------- | ----------------- | ------------------------------------------------------------- | -------- |
| webAuthnAssertion | WebAuthnAssertion | The WebAuthn assertion data to verify the WebAuthn MFA method | Yes      |
| verificationId    | string            | The verification record id                                    | Yes      |

#### Create backup codes

`POST /api/experience/verification/backup-codes/generate`

Generate a new set of backup codes for the user to set up the Backup Code MFA method.
The new created backup codes will be inserted into the user's MFA settings once the verification is successful and the interaction is submitted.

Response body:

```ts
{
  backupCodes: string[];
  verificationId: string;
}
```

#### Verify backup code

`POST /api/experience/verification/backup-code/verify`

Verify the Backup Code MFA method with the provided backup code.

Request body:

| Field      | Type   | Description                                   | Required |
| ---------- | ------ | --------------------------------------------- | -------- |
| backupCode | string | the backup code to verify the Backup Code MFA | Yes      |

### 4. Profile fulfillment API

The profile fulfillment API is used to provide additional profile data and MFA settings during the sign-in experience. Upon the sign-in experience settings, the user must provide the necessary profile data and MFA settings to complete the interaction.

#### Update profile

`PATCH /api/experience/profile`

The `profile` API is used to update the user's profile information in the Logto system. For identifier update a valid `verification record` must be provided.

Request body:

| Field        | Type                            | Description                                       | Required                                |
| ------------ | ------------------------------- | ------------------------------------------------- | --------------------------------------- |
| email        | string                          | The user's email address.                         | No                                      |
| phone        | string                          | The user's phone number.                          | No                                      |
| username     | string                          | The user's username.                              | No                                      |
| password     | string                          | The user's password.                              | No (Yes for password update)            |
| verification | Verification<verification_code> | The security data to verify the given identifier. | No (Yes for verified identifier update) |

#### Skip MFA setup

`POST /api/experience/profile/mfa-skipped`

The `mfa-skipped` API is used to skip the MFA setup process for the user.

### 5. Interaction API

#### Submit interaction

`POST /api/experience/submit`

The `submit` API is used to submit the user's interaction to the Logto. The user must provide a valid interaction to authenticate and access the platform resources.

If any new profile or MFA settings are updated during the interaction, the user must submit the interaction to save the changes.

#### Get interaction status

`GET /api/experience/interaction-status`

The `interaction-status` API is used to get the current status of the user's interaction. The user can use this API to check the progress and missing security checks during the interaction flow.
